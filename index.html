<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Inventaire Pause Burger</title>

  <style>
    :root {
      --bg: #111111;
      --card: #1f1f1f;
      --accent: #ff7a00;
      --text: #ffffff;
      --muted: #aaaaaa;
      --danger: #e63946;
      --border: #333333;
      --success: #2ecc71;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    header {
      padding: 10px 16px 12px;
      display: flex;
      align-items: center;
      gap: 10px;
      background: #000;
      border-bottom: 2px solid var(--accent);
    }

    header img {
      height: 42px;
      width: auto;
      border-radius: 6px;
    }

    header .title-block {
      display: flex;
      flex-direction: column;
    }

    header .title {
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--accent);
    }

    header .subtitle {
      font-size: 11px;
      color: var(--muted);
    }

    .toolbar {
      padding: 8px 12px;
      background: #181818;
      border-bottom: 1px solid var(--border);
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 20;
    }

    .toolbar-left,
    .toolbar-right {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }

    .tag {
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid var(--border);
      color: var(--muted);
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
      background: #222;
      color: var(--text);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .btn-primary {
      background: var(--accent);
      color: #000;
      font-weight: 600;
    }

    .btn-outline {
      border: 1px solid var(--border);
      background: transparent;
      color: var(--muted);
    }

    .btn-danger {
      background: transparent;
      border: 1px solid var(--danger);
      color: var(--danger);
    }

    .btn:active {
      transform: scale(0.98);
    }

    main {
      padding: 12px;
      max-width: 980px;
      margin: 0 auto 40px;
    }

    .card {
      background: var(--card);
      border-radius: 14px;
      border: 1px solid var(--border);
      padding: 12px;
      margin-bottom: 16px;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 6px;
    }

    .card-title {
      font-size: 14px;
      font-weight: 600;
    }

    .card-subtitle {
      font-size: 11px;
      color: var(--muted);
    }

    .summary-list {
      list-style: none;
      padding: 0;
      margin: 6px 0 0;
      font-size: 12px;
    }

    .summary-list li {
      display: flex;
      justify-content: space-between;
      border-bottom: 1px dashed #333;
      padding: 2px 0;
    }

    .summary-empty {
      font-size: 11px;
      color: var(--muted);
    }

    .categories {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .category {
      background: #161616;
      border-radius: 12px;
      border: 1px solid #242424;
      padding: 10px;
    }

    .category-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .category-title {
      font-size: 13px;
      font-weight: 600;
    }

    .category-count {
      font-size: 11px;
      color: var(--muted);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }

    th,
    td {
      padding: 4px 3px;
      text-align: left;
    }

    th {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--muted);
      border-bottom: 1px solid #333;
    }

    td.name {
      width: 45%;
      word-wrap: break-word;
    }

    td.qty,
    td.chk {
      text-align: center;
      width: 18%;
    }

    input[type="number"] {
      width: 60px;
      padding: 2px 4px;
      background: #111;
      border-radius: 6px;
      border: 1px solid #444;
      color: var(--text);
      font-size: 11px;
      text-align: center;
    }

    input[type="checkbox"] {
      width: 16px;
      height: 16px;
      accent-color: var(--accent);
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid #333;
      font-size: 10px;
      color: var(--muted);
    }

    .pill-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--accent);
    }

    .summary-actions {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
    }

    textarea#exportText {
      width: 100%;
      min-height: 80px;
      margin-top: 8px;
      padding: 6px;
      border-radius: 8px;
      border: 1px solid #333;
      background: #000;
      color: var(--text);
      font-size: 11px;
      resize: vertical;
    }

    @media (min-width: 720px) {
      .toolbar {
        padding-inline: 16px;
      }
      main {
        padding-inline: 16px;
      }
    }
  </style>
</head>

<body>
<header>
  <!-- Logo en haut Ã  gauche -->
  <img src="IMG_0100.jpeg" alt="Pause Burger Logo" />
  <div class="title-block">
    <span class="title">Pause Burger â€“ Inventaire</span>
    <span class="subtitle">Fiche dâ€™inventaire avec quantitÃ©s & commandes</span>
  </div>
</header>

<div class="toolbar">
  <div class="toolbar-left">
    <span class="tag">ðŸ“… Inventaire du soir</span>
    <span class="tag" id="summaryTag">Ã€ commander : 0</span>
  </div>
  <div class="toolbar-right">
    <button class="btn btn-outline" id="resetBtn">RÃ©initialiser</button>
    <button class="btn btn-primary" id="showToOrderBtn">Voir Ã  commander</button>
  </div>
</div>

<main>
  <!-- RÃ©sumÃ© des produits Ã  commander -->
  <section class="card" id="summaryCard">
    <div class="card-header">
      <div>
        <div class="card-title">Liste pour le chef</div>
        <div class="card-subtitle">
          Tout ce qui est cochÃ© Â« Ã€ commander Â» apparaÃ®t ici.
        </div>
      </div>
      <span class="pill">
        <span class="pill-dot"></span>
        <span id="summaryCountLabel">0 produit</span>
      </span>
    </div>
    <ul class="summary-list" id="summaryList"></ul>
    <p class="summary-empty" id="summaryEmpty">
      Rien Ã  commander pour lâ€™instant. Coche Â« Ã€ commander Â» sur les produits
      qui manquent et mets la quantitÃ© Ã  ramener.
    </p>

    <div class="summary-actions">
      <button class="btn btn-outline" id="copyListBtn">Copier la liste</button>
      <button class="btn btn-outline" id="clearToOrderBtn">
        Vider la liste
      </button>
    </div>
    <textarea id="exportText" placeholder="La liste texte apparaÃ®tra ici pour coller dans WhatsApp / SMS / etc."></textarea>
  </section>

  <!-- CatÃ©gories + produits -->
  <section class="categories" id="categories"></section>
</main>

<script>
  /********************
   *  DonnÃ©es produits
   ********************/
  const DATA = [
    {
      id: "frais",
      label: "Frais (garnitures)",
      items: [
        { id: "frites", name: "Frites" }, // en premier
        { id: "salade", name: "Salade" },
        { id: "tomate", name: "Tomate" },
        { id: "oignon", name: "Oignon" },
        { id: "cornichon", name: "Cornichon" }
      ]
    },
    {
      id: "viandes",
      label: "Viandes & produits chauds",
      items: [
        { id: "steak90", name: "Steak 90g" },
        { id: "steak45", name: "Steak 45g" },
        { id: "cb", name: "Cordon bleu" },
        { id: "kebab", name: "Kebab" },
        { id: "nuggets", name: "Nuggets" },
        { id: "fricadelle", name: "Fricadelle" },
        { id: "merguez", name: "Merguez" },
        { id: "chorizo", name: "Chorizo" },
        { id: "poulet", name: "Poulet" },
        { id: "fish", name: "Fish" },
        { id: "rosti", name: "RÃ¶sti" }
      ]
    },
    {
      id: "sauces_g1",
      label: "Sauces â€“ Groupe 1 (principales)",
      items: [
        { id: "biggy", name: "Biggy" },
        { id: "giant", name: "Giant" },
        { id: "mayo", name: "Mayo" },
        { id: "ketchup", name: "Ketchup" },
        { id: "hannibal", name: "Hannibal" },
        { id: "algerienne", name: "AlgÃ©rienne" },
        { id: "samourai", name: "SamouraÃ¯" },
        { id: "bbq", name: "Barbecue" }
      ]
    },
    {
      id: "sauces_g2",
      label: "Sauces â€“ Groupe 2 (complÃ©ments)",
      items: [
        { id: "pita", name: "Pita" },
        { id: "oignon_p", name: "Oignons poÃªlÃ©s / sauce" },
        { id: "poivron", name: "Poivrons" },
        { id: "andalouse", name: "Andalouse" },
        { id: "brazil", name: "Brazil" }
      ]
    },
    {
      id: "sauces_autres",
      label: "Sauces â€“ Autres",
      items: [
        { id: "tasty", name: "Tasty" },
        { id: "smoky", name: "Smoky" },
        { id: "curry", name: "Curry" },
        { id: "fish_sauce", name: "Sauce Fish" },
        { id: "cheezy", name: "Cheezy" },
        { id: "americaine", name: "Sauce AmÃ©ricaine" }, // marocaine remplacÃ©e
        { id: "fromagere", name: "Sauce fromagÃ¨re" }
      ]
    },
    {
      id: "epices",
      label: "Ã‰pices & assaisonnements",
      items: [
        { id: "vinaigre", name: "Vinaigre" },
        { id: "epices", name: "Ã‰pices" },
        { id: "epices_tenders", name: "Tender Ã©pices" },
        { id: "epices_jaune", name: "Ã‰pices jaune" },
        { id: "sel", name: "Sel" },
        { id: "poivre", name: "Poivre" }
      ]
    },
    {
      id: "tenders",
      label: "Tenders & ailes",
      items: [
        { id: "boite_tenders_3", name: "BoÃ®te Tenders Ã—3" },
        { id: "boite_tenders_6", name: "BoÃ®te Tenders Ã—6" },
        { id: "boite_tenders_14", name: "BoÃ®te Tenders Ã—14" }, // 12 remplacÃ© par 14
        { id: "boite_tenders_20", name: "BoÃ®te Tenders Ã—20" },
        { id: "wings", name: "Wings" },
        { id: "wings_spicy", name: "Wings Ã©picÃ©" }
      ]
    },
    {
      id: "frites_consommables",
      label: "Consommables frites",
      items: [
        { id: "sac_frites_petit", name: "Sacs de frites petits" },
        { id: "sac_frites_grand", name: "Sacs de frites grands" }
      ]
    },
    {
      id: "emballages",
      label: "Emballages",
      items: [
        { id: "emb_tacos", name: "Emballage tacos" },
        { id: "emb_gd_burger", name: "Emballage grand burger" },
        { id: "emb_burger", name: "Emballage burger" },
        { id: "emb_wrap", name: "Emballage wrap" }
      ]
    },
    {
      id: "pains",
      label: "Pains",
      items: [
        { id: "pain_sesame", name: "Pain sÃ©same" },
        { id: "pain_brioche", name: "Pain briochÃ©" },
        { id: "pain_toast", name: "Pain toast" },
        { id: "pain_noir", name: "Pain noir" },
        { id: "pain_rouge", name: "Pain rouge" },
        { id: "pain_peluche", name: "Pain peluche" }
      ]
    },
    {
      id: "divers",
      label: "Divers & hygiÃ¨ne",
      items: [
        { id: "farine", name: "Farine" },
        { id: "sac_decong", name: "Sacs de dÃ©congÃ©lation" },
        { id: "papier_cuisson", name: "Papier cuisson" },
        { id: "alu", name: "Papier aluminium" }
      ]
    }
  ];

  /********************
   *  Gestion Ã©tat
   ********************/
  const STORAGE_KEY = "pauseburger_inventaire_v2";

  function defaultState() {
    const state = {};
    DATA.forEach(cat => {
      cat.items.forEach(item => {
        state[item.id] = {
          qty: "",
          done: false,
          toOrder: false
        };
      });
    });
    return state;
  }

  function loadState() {
    try {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) return defaultState();
      const parsed = JSON.parse(raw);
      return { ...defaultState(), ...parsed };
    } catch (e) {
      console.error(e);
      return defaultState();
    }
  }

  let state = loadState();

  function saveState() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    refreshSummary();
  }

  /********************
   *  Rendu DOM
   ********************/
  const categoriesEl = document.getElementById("categories");
  const summaryListEl = document.getElementById("summaryList");
  const summaryEmptyEl = document.getElementById("summaryEmpty");
  const summaryTagEl = document.getElementById("summaryTag");
  const summaryCountLabelEl = document.getElementById("summaryCountLabel");
  const exportTextEl = document.getElementById("exportText");

  function render() {
    categoriesEl.innerHTML = "";
    DATA.forEach(cat => {
      const catDiv = document.createElement("section");
      catDiv.className = "category";

      const header = document.createElement("div");
      header.className = "category-header";

      const title = document.createElement("span");
      title.className = "category-title";
      title.textContent = cat.label;

      const count = document.createElement("span");
      count.className = "category-count";
      count.textContent = `${cat.items.length} produits`;

      header.appendChild(title);
      header.appendChild(count);
      catDiv.appendChild(header);

      const table = document.createElement("table");
      const thead = document.createElement("thead");
      thead.innerHTML = `
        <tr>
          <th>Produit</th>
          <th class="qty">QtÃ©</th>
          <th class="chk">Vu</th>
          <th class="chk">Ã€ commander</th>
        </tr>
      `;
      table.appendChild(thead);

      const tbody = document.createElement("tbody");

      cat.items.forEach(item => {
        const row = document.createElement("tr");
        const itemState = state[item.id];

        const tdName = document.createElement("td");
        tdName.className = "name";
        tdName.textContent = item.name;

        const tdQty = document.createElement("td");
        tdQty.className = "qty";
        const inputQty = document.createElement("input");
        inputQty.type = "number";
        inputQty.min = "0";
        inputQty.placeholder = "-";
        inputQty.value = itemState.qty;
        inputQty.addEventListener("input", e => {
          state[item.id].qty = e.target.value;
          saveState();
        });
        tdQty.appendChild(inputQty);

        const tdDone = document.createElement("td");
        tdDone.className = "chk";
        const chkDone = document.createElement("input");
        chkDone.type = "checkbox";
        chkDone.checked = itemState.done;
        chkDone.addEventListener("change", e => {
          state[item.id].done = e.target.checked;
          saveState();
        });
        tdDone.appendChild(chkDone);

        const tdToOrder = document.createElement("td");
        tdToOrder.className = "chk";
        const chkToOrder = document.createElement("input");
        chkToOrder.type = "checkbox";
        chkToOrder.checked = itemState.toOrder;
        chkToOrder.addEventListener("change", e => {
          state[item.id].toOrder = e.target.checked;
          saveState();
        });
        tdToOrder.appendChild(chkToOrder);

        row.appendChild(tdName);
        row.appendChild(tdQty);
        row.appendChild(tdDone);
        row.appendChild(tdToOrder);

        tbody.appendChild(row);
      });

      table.appendChild(tbody);
      catDiv.appendChild(table);
      categoriesEl.appendChild(catDiv);
    });

    refreshSummary();
  }

  /********************
   *  RÃ©sumÃ©
   ********************/
  function refreshSummary() {
    const itemsToOrder = [];
    DATA.forEach(cat => {
      cat.items.forEach(item => {
        const s = state[item.id];
        if (s.toOrder) {
          itemsToOrder.push({
            name: item.name,
            qty: s.qty || "0"
          });
        }
      });
    });

    summaryListEl.innerHTML = "";
    if (itemsToOrder.length === 0) {
      summaryEmptyEl.style.display = "block";
      summaryCountLabelEl.textContent = "0 produit";
      summaryTagEl.textContent = "Ã€ commander : 0";
      exportTextEl.value = "";
      return;
    }

    summaryEmptyEl.style.display = "none";
    itemsToOrder.forEach(it => {
      const li = document.createElement("li");
      const left = document.createElement("span");
      left.textContent = it.name;
      const right = document.createElement("span");
      right.textContent = `Ã— ${it.qty}`;
      li.appendChild(left);
      li.appendChild(right);
      summaryListEl.appendChild(li);
    });

    summaryCountLabelEl.textContent =
      itemsToOrder.length + (itemsToOrder.length > 1 ? " produits" : " produit");
    summaryTagEl.textContent = `Ã€ commander : ${itemsToOrder.length}`;

    const lines = itemsToOrder.map(it => `- ${it.name} : ${it.qty}`);
    exportTextEl.value =
      "Liste Pause Burger â€“ commande :\n\n" + lines.join("\n");
  }

  /********************
   *  Actions toolbar
   ********************/
  document.getElementById("resetBtn").addEventListener("click", () => {
    if (!confirm("RÃ©initialiser tout lâ€™inventaire ?")) return;
    state = defaultState();
    saveState();
    render();
  });

  document.getElementById("clearToOrderBtn").addEventListener("click", () => {
    if (!confirm("Vider uniquement la liste Ã  commander ?")) return;
    Object.keys(state).forEach(key => {
      state[key].toOrder = false;
    });
    saveState();
    render();
  });

  document
    .getElementById("showToOrderBtn")
    .addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

  document.getElementById("copyListBtn").addEventListener("click", async () => {
    const text = exportTextEl.value.trim();
    if (!text) return;
    try {
      await navigator.clipboard.writeText(text);
      alert("Liste copiÃ©e dans le presse-papier âœ…");
    } catch (e) {
      alert(
        "Impossible de copier automatiquement. Tu peux copier le texte manuellement."
      );
    }
  });

  // Premier rendu
  render();
</script>
</body>
</html>
